package com.vnu.parabolicflight.util;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.StringTokenizer;

public class DataWriting {

	public static void dataWriting(File fileData, File gyroscopeDataFile,
			File accelerometerDataFile, File gravityDataFile) {

		BufferedReader gyroscopeBuffered = null, accelerometerBuffered = null, gravityBuffered = null;
		float time;
		float[] accelerometer = new float[3];
		float[] gyroscope = new float[3];
		float[] gravity = new float[3];
		int index;
		
		try {
			gyroscopeBuffered = new BufferedReader(new FileReader(
					gyroscopeDataFile.getAbsoluteFile()));
			
			accelerometerBuffered = new BufferedReader(new FileReader(
					accelerometerDataFile.getAbsoluteFile()));
			
			gravityBuffered = new BufferedReader(new FileReader(
					gravityDataFile.getAbsoluteFile()));

			String gyroLine = null, accLine = null, graLine = null;

			while ((gyroLine = gyroscopeBuffered.readLine()) != null
					|| (accLine = accelerometerBuffered.readLine()) != null
					|| (graLine = gravityBuffered.readLine()) != null) {
				 	
				 if (accLine != null) {
					 StringTokenizer acc = new java.util.StringTokenizer(accLine, " ");
					 index = 0;
					 while (index <3) {
						 accelerometer[index] = Float.valueOf(acc.nextToken()).floatValue();
						 index++;
					 }
					 time = Float.valueOf(acc.nextToken()).floatValue();   
				 }
				 
				 if (gyroLine != null) {
					 StringTokenizer gyro = new java.util.StringTokenizer(gyroLine, " ");
					 index = 0;
					 while (index <3) {
						 gyroscope[index] = Float.valueOf(gyro.nextToken()).floatValue();
						 index++;
					 }
					 time = Float.valueOf(acc.nextToken()).floatValue();   
				 }
				 
				 if (graLine != null) {
					 StringTokenizer acc = new java.util.StringTokenizer(graLine, " ");
					 index = 0;
					 while (index <3) {
						 accelerometer[index] = Float.valueOf(acc.nextToken()).floatValue();
						 index++;
					 }
					 time = Float.valueOf(acc.nextToken()).floatValue();   
				 }
			}
		} catch (IOException e) {
		} finally {
			try {
				if (gyroscopeBuffered != null)
					gyroscopeBuffered.close();
				if (accelerometerBuffered != null)
					accelerometerBuffered.close();
				if (gravityBuffered != null)
					gravityBuffered.close();
			} catch (IOException ex) {
			}
		}

	}
}

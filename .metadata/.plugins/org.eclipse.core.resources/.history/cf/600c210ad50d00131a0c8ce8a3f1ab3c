package com.vnu.parabolicflight.util;

import java.io.File;
import java.io.FileOutputStream;
import java.io.OutputStreamWriter;

import android.os.Environment;
import java.text.DateFormat;
import java.text.SimpleDateFormat;

public class Writer {

	private String fileName;
	private File dataFile;

	public void setNewFileName() {
		this.fileName = "parabolic-flight-"
				+ String.valueOf(System.currentTimeMillis());
	}

	public String getFileName() {
		return this.fileName;
	}

	public void creatNewFile() {

		setNewFileName();

		try {
			dataFile = new File(Environment.getExternalStorageState()
					+ fileName + ".txt");

			dataFile.createNewFile();
		} catch (Exception e) {
		}
	}

	public void appendFile(int type, float X, float Y, float Z) {
		try {
			FileOutputStream fOut = new FileOutputStream(dataFile);
			OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

			if (type == 0) {
				long currentTime = System.currentTimeMillis();
				DateFormat format = new SimpleDateFormat("HH:mm:ss");
				
				myOutWriter.append(format. + " " + currentTime);
			}

			myOutWriter.append(X + " " + Y + " " + Z + "\n");
			myOutWriter.close();

			fOut.close();
		} catch (Exception e) {

		}
	}
}
